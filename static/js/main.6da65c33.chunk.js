(this["webpackJsonptrip-planner"]=this["webpackJsonptrip-planner"]||[]).push([[0],{353:function(e,t,a){e.exports=a.p+"static/media/travel1.eda7aff3.jpg"},354:function(e,t,a){e.exports=a.p+"static/media/travel2.f85b1e62.jpg"},355:function(e,t,a){e.exports=a.p+"static/media/travel3.373599b5.jpg"},356:function(e,t,a){e.exports=a.p+"static/media/travel4.06f3c00f.jpg"},357:function(e,t,a){e.exports=a.p+"static/media/travel5.3b3c1978.jpg"},358:function(e,t,a){e.exports=a.p+"static/media/travel6.ca2510a6.jpg"},359:function(e,t,a){e.exports=a.p+"static/media/travel7.eba269f6.jpg"},374:function(e,t,a){e.exports=a(572)},379:function(e,t,a){},572:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(81),i=a.n(l),o=(a(379),a(257)),c=a(30),s=a(31),u=a(33),d=a(32),m=a(34),h=a(316),p=a(109),g=a(43),E=a(337),v=a(252),f=a(615),b=a(614),y=a(613),j=a(617),w=a(149),C=a(616),O=a(256),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={viewport:{width:400,height:400,latitude:a.props.latitude,longitude:a.props.longitude,zoom:16}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(O.b,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoiYWxleGN1aSIsImEiOiJjanYzNTVsejcyY29uNDNwZml4YjZ3dHV4In0.f4di1n6PqkuH-Lksizp3-Q"}),r.a.createElement(O.a,{latitude:this.props.latitude,longitude:this.props.longitude},r.a.createElement(g.a,{color:"red",name:"point"})))}}]),t}(n.Component),S=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getPhotos",value:function(){return this.props.details.photos.map((function(e){return r.a.createElement("div",null,r.a.createElement(y.a,{trigger:r.a.createElement(w.a,{src:e,size:"medium",verticalAlign:"middle"}),basic:!0},r.a.createElement(y.a.Content,{image:!0},r.a.createElement(w.a,{wrapped:!0,size:"big",src:e}))),r.a.createElement(b.a,{hidden:!0,fitted:!0}))}))}},{key:"getAddress",value:function(){for(var e=this.props.details.location.display_address,t=[],a=0;a<e.length-1;a++)t.push(e[a]),t.push(", ");return t.push(e[e.length-1]),t}},{key:"getCategories",value:function(){for(var e=this.props.details.categories,t=[],a=0;a<e.length-1;a++){var n=e[a].title;t.push(n),t.push(", ")}return t.push(e[e.length-1].title),t}},{key:"render",value:function(){if(this.props.loading)return r.a.createElement(g.a,{loading:!0,name:"circle notched"});var e=this.getCategories(),t=this.getPhotos(),a=this.getAddress();return r.a.createElement(E.a,{columns:3,divided:!0},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(f.a,{as:"h1"},r.a.createElement(g.a,{name:"photo"}),r.a.createElement(f.a.Content,null,"Photos")),t),r.a.createElement(E.a.Column,{width:8},r.a.createElement(f.a,{as:"h1"},r.a.createElement(f.a.Content,null,this.props.details.name),r.a.createElement(f.a.Subheader,null,e)),r.a.createElement(C.a,{bulleted:!0},r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Header,null,"Address"),a),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Header,null,"Phone"),this.props.details.display_phone),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Header,null,"Price"),this.props.price),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Header,null,"Rating"),this.props.rating)),r.a.createElement(x,{latitude:this.props.details.coordinates.latitude,longitude:this.props.details.coordinates.longitude}))))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getYelpDetailedUrl=function(e){return"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/"+e},a.searchHandler=function(){var e=a.props.eventInfo;a.setState({loading:!0},(function(){fetch(a.getYelpDetailedUrl(e.id),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer HUr4xcWKgrQ7Gm0cvc8rULhUgwxkoAAfd5gff72Wa95Oc48lh7-iuV9JDgBiAkecHOU9_oY160soohTtjdd_LAOTWB8WwPMbIOHz1incJPU2UWQQ_Xr9iMf4c4B9XnYx"}}).then((function(e){return e.json()})).then((function(e){a.setState({details:e,loading:!1})}))}))},a.convertRating=function(){var e=[],t=a.props.eventInfo.rating,n=!1;Number.isInteger(t)||(t-=.5,n=!0);for(var l=0;l<t;l++)e.push(r.a.createElement(g.a,{name:"star",color:"yellow"}));return n&&e.push(r.a.createElement(g.a,{name:"star half",color:"yellow"})),e},a.getRenderedEventCard=function(){var e=a.state.isHovered,t=a.props.eventInfo;return r.a.createElement(v.a,{attached:!0,color:"teal",secondary:e},r.a.createElement(f.a,{as:"h2"},t.name,r.a.createElement(b.a,{hidden:!0}),r.a.createElement(f.a.Subheader,null,t.categories.map((function(e){return e.title})).join(", ")),r.a.createElement(f.a.Subheader,null,t.location.display_address.join(", ")),r.a.createElement(f.a.Subheader,null,t.display_phone)))},a.state={details:[],loading:!1,isHovered:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.details,l=this.props,i=l.eventInfo,o=l.eventDate,c=l.eventTime,s=l.deleteSelectedEvent,u=this.convertRating(),d=this.getRenderedEventCard();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginRight:"10px"}},r.a.createElement(f.a,{as:"h1",attached:"top"},r.a.createElement(E.a,{columns:"equal"},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,c),r.a.createElement(E.a.Column,{textAlign:"right",style:{marginRight:"-10px"}},r.a.createElement(g.a,{link:!0,name:"delete",color:"red",onClick:function(){s(o,c)}})))))),r.a.createElement(y.a,{trigger:r.a.createElement("div",{style:{marginBottom:"20px",marginRight:"10px"},onClick:this.searchHandler,onMouseEnter:function(){return e.setState({isHovered:!0})},onMouseLeave:function(){return e.setState({isHovered:!1})}},d)},r.a.createElement(y.a.Header,null,o,", ",c),r.a.createElement(y.a.Content,null,r.a.createElement(S,{loading:a,details:n,price:r.a.createElement(j.a,{style:{color:"green"}},i.price),rating:u}))))}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a.getRenderedEvents=function(){var e=a.props,t=e.eventsWithTimes,n=e.eventDate,l=e.deleteSelectedEvent,i=[],o={};for(var c in Object.keys(t).sort((function(e,t){return new Date("1970/01/01 "+e)-new Date("1970/01/01 "+t)})).forEach((function(e){o[e]=t[e]})),o){var s=o[c];i.push(r.a.createElement(k,{eventDate:n,eventInfo:s.business,eventTime:c,deleteSelectedEvent:l}))}return i},a.state={activeIndex:0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex,t=this.props.eventDate,a=this.getRenderedEvents();return r.a.createElement(h.a,null,r.a.createElement(h.a.Title,{active:0===e,index:0,onClick:this.handleClick},r.a.createElement(p.a.Group,{size:"big"},r.a.createElement(p.a,null,r.a.createElement(g.a,{name:"dropdown"}),t),r.a.createElement(p.a,{color:"teal"},a.length))),r.a.createElement(h.a.Content,{active:0===e},r.a.createElement(E.a,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:1}),r.a.createElement(E.a.Column,{width:15},a)))))}}]),t}(r.a.Component),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).groupEvents=function(){var e=a.props.selected.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),t={};return e.forEach((function(e){var a=e.date.toDateString();t[a]={}})),e.forEach((function(e){var a=e.date.toDateString();t[a][e.time]=e})),t},a.getRenderedDays=function(){var e=[],t=a.groupEvents();for(var n in t){var l=t[n];e.push(r.a.createElement(R,{eventsWithTimes:l,eventDate:n,deleteSelectedEvent:a.props.deleteSelectedEvent}))}return e},a.getTimeRange=function(){var e=a.props.dates,t=e[0],n=e[e.length-1];return{start:t.toDateString(),end:n.toDateString()}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.getRenderedDays(),t=this.getTimeRange(),a=(window.innerHeight-68).toString()+"px";return r.a.createElement(j.a,null,r.a.createElement("div",{style:{marginTop:"20px",marginBottom:"10px"}},r.a.createElement(E.a,{container:!0},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(f.a,{size:"huge"},"Your Itinerary"),r.a.createElement(E.a,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:2},r.a.createElement(f.a,{size:"small"},"Start Date")),r.a.createElement(E.a.Column,{width:14,style:{marginBottom:"10px"}},r.a.createElement(f.a,{size:"small",color:"grey"},t.start)),r.a.createElement(E.a.Column,{width:2},r.a.createElement(f.a,{size:"small"},"End Date")),r.a.createElement(E.a.Column,{width:14},r.a.createElement(f.a,{size:"small",color:"grey"},t.end)))))))),r.a.createElement(b.a,{fitted:!0}),r.a.createElement(j.a,{style:{overflowY:"auto",overflowX:"hidden",height:a,paddingLeft:"20px"}},e))}}]),t}(r.a.Component),T=a(620),I=a(573),A=a(619),P=a(577),B=a(105),H=a(123),z=a(207),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSelect=function(e){var t=a.state,n=t.dateIndex,r=t.time,l=a.props;(0,l.addBusiness)(l.business,l.dates[n],r)},a.convertRating=function(){var e=[],t=a.props.business.rating,n=!1;Number.isInteger(t)||(t-=.5,n=!0);for(var l=0;l<t;l++)e.push(r.a.createElement(g.a,{name:"star",color:"yellow"}));return n&&e.push(r.a.createElement(g.a,{name:"star half",color:"yellow"})),e},a.state={dateIndex:-1,time:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.time,n=t.dateIndex,l=this.props,i=l.business,o=l.dates.map((function(e){return e.toLocaleDateString()})),c=this.convertRating();return r.a.createElement(v.a,{raised:!0,style:{marginRight:"10px"}},r.a.createElement(E.a,{celled:!0},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:6},r.a.createElement(w.a,{src:i.image_url,style:{objectFit:"cover",width:"100%",height:"200px"}})),r.a.createElement(E.a.Column,{width:10},r.a.createElement("h3",null,i.name),r.a.createElement("div",{style:{float:"left",width:"50%"}},r.a.createElement("span",null,i.categories.map((function(e){return e.title})).join(", "))," ",r.a.createElement("br",null),i.price&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",{style:{color:"green"}},i.price),r.a.createElement("br",null),c),r.a.createElement("div",{style:{position:"absolute",bottom:"0",width:"50%"}},i.display_phone," ",r.a.createElement("br",null),i.location.display_address.join(", "),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{style:{float:"right"}},i.review_count," reviews",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(H.a,{placeholder:"Select Date",fluid:!0,selection:!0,options:o.map((function(e,t){return{key:i.id+e,text:e,value:t}})),style:{marginBottom:"5px"},onChange:function(t,a){return e.setState({dateIndex:a.value})}}),r.a.createElement(z.TimeInput,{name:"time",value:a,onChange:function(t,a){return e.setState({time:a.value})},clearable:!0,onClear:function(){e.setState({time:""})},timeFormat:"AMPM",icon:!1,placeholder:"Select Time",style:{marginBottom:"5px"}}),r.a.createElement(B.a,{icon:!0,color:"teal",labelPosition:"right",disabled:-1===n||""===a,onClick:this.handleSelect},"Add to plan",r.a.createElement(g.a,{name:"add"})))))))}}]),t}(r.a.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getSelectedLocation=function(){return a.state.location?a.state.location:a.props.location},a.getYelpURL=function(e){var t=a.getSelectedLocation();return"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term="+e+"&latitude="+t.lat.toString()+"&longitude="+t.lon.toString()},a.searchHandler=function(e){var t=a.state.query;a.setState({loading:!0},(function(){fetch(a.getYelpURL(t),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer HUr4xcWKgrQ7Gm0cvc8rULhUgwxkoAAfd5gff72Wa95Oc48lh7-iuV9JDgBiAkecHOU9_oY160soohTtjdd_LAOTWB8WwPMbIOHz1incJPU2UWQQ_Xr9iMf4c4B9XnYx"}}).then((function(e){return e.json()})).then((function(e){a.setState({results:e.businesses,loading:!1})}))}))},a.clearResults=function(){a.setState({query:"",results:[]})},a.getPlaceholderCards=function(){for(var e=[],t=0;t<20;t++)e.push(r.a.createElement(v.a,{key:t,raised:!0,style:{marginRight:"10px"}},r.a.createElement(E.a,{celled:!0},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:6},r.a.createElement(T.a,null,r.a.createElement(T.a.Image,{style:{objectFit:"cover",width:"100%",height:"200px"}}))),r.a.createElement(E.a.Column,{width:10},r.a.createElement(I.a,{active:!0,inverted:!0},r.a.createElement(A.a,{inverted:!0},"Loading")))))));return e},a.state={query:"",results:[],loading:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.results,l=t.loading,i=this.props,o=i.dates,c=i.addBusiness,s=(window.innerHeight-68).toString()+"px",u=this.getPlaceholderCards(),d=this.getSelectedLocation();return r.a.createElement(j.a,null,r.a.createElement("div",{style:{marginTop:"20px",marginBottom:"10px"}},r.a.createElement(E.a,{columns:"equal"},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:12},r.a.createElement(f.a,{size:"huge"},"Things to do around ",d.name))),r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(P.a,{style:{marginRight:"10px",marginTop:"10px"},action:{color:"teal",icon:"search",onClick:this.searchHandler,disabled:!a},value:a,placeholder:"Search",onChange:function(t){e.setState({query:t.target.value})}}),r.a.createElement(B.a,{style:{marginRight:"10px",marginTop:"10px"},icon:"idea",labelPosition:"right",color:"teal",content:"What's popular?",onClick:function(){return e.setState({query:""},e.searchHandler)}}),n&&n[0]&&r.a.createElement(B.a,{style:{marginRight:"10px",marginTop:"10px"},icon:"remove circle",labelPosition:"right",color:"teal",content:"Clear results",onClick:this.clearResults}))))),r.a.createElement(b.a,{fitted:!0}),l&&u,n&&n[0]&&r.a.createElement(j.a,{style:{overflow:"auto",maxHeight:s,paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement(j.a,null,n.map((function(e,t){return r.a.createElement(W,{key:t.toString(),business:e,dates:o,addBusiness:c})})))))}}]),t}(r.a.Component),U=a(254),Y=a(618),_=a(351),N=a(211),q=a(352),J=a.n(q),M=a(353),Q=a.n(M),F=a(354),G=a.n(F),V=a(355),X=a.n(V),K=a(356),Z=a.n(K),$=a(357),ee=a.n($),te=a(358),ae=a.n(te),ne=a(359),re=a.n(ne),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){var n,r=t.name,l=t.value;a.state.hasOwnProperty(r)&&a.setState((n={},Object(U.a)(n,r,l),Object(U.a)(n,"dateCheck",l.split(" - ").length<2||0===l.split(" - ")[1].length),n))},a.getDates=function(e,t){for(var a=[],n=e,r=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};n<=t;)a.push(n),n=r.call(n,1);return a},a.getBackground=function(){var e=[Q.a,G.a,X.a,Z.a,ee.a,ae.a,re.a];return r.a.createElement(J.a,{images:e,duration:7,transition:2})},a.handleStartPlan=function(e){var t=a.state,n=t.datesRange,r=t.location,l=a.props.startPlan,i=n.split(" - ");function o(e){var t=e.split("-"),a=t[0];return t[0]=t[1],t[1]=a,t.join("-")}var c=new Date(o(i[0])),s=new Date(o(i[1]));l(r,a.getDates(c,s))},a.stripLocationName=function(e){return e.split(",")[0]},a.state={datesRange:"",location:null,dateCheck:!0,placeCheck:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.datesRange,n=t.dateCheck,l=t.placeCheck,i=this.getBackground();return r.a.createElement("div",{style:{height:"100vh"}},i,r.a.createElement(E.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(E.a.Column,{style:{maxWidth:450}},r.a.createElement(v.a,null,r.a.createElement(f.a,null,"Plan Your Next Adventure."),r.a.createElement(Y.a,{size:"large"},r.a.createElement(z.DatesRangeInput,{name:"datesRange",placeholder:"From - To",value:a,iconPosition:"left",onChange:this.handleChange}),r.a.createElement(_.a,{onSuggestSelect:function(t){t&&e.setState({placeCheck:!1,location:{lat:t.location.lat,lon:t.location.lng,name:e.stripLocationName(t.label)}})}}),r.a.createElement("br",null),r.a.createElement(B.a,{as:N.b,to:"/plan",onClick:this.handleStartPlan,disabled:n||l,color:"teal",fluid:!0,size:"large"},"Start Planning!"))))))}}]),t}(r.a.Component),ie=a(106),oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).addBusinessToPlanner=function(e,t,n){var r=a.state.selectedEvents;a.setState({selectedEvents:[].concat(Object(o.a)(r),[{business:e,date:t,time:n}])})},a.deleteSelectedEvent=function(e,t){var n=a.state.selectedEvents,r=Object(o.a)(n),l=-1;r.forEach((function(a,n){a.date.toDateString()===e&&a.time===t&&(l=n)})),l>-1&&(r.splice(l,1),a.setState({selectedEvents:r}))},a.startPlan=function(e,t){a.setState({location:e,dates:t})},a.state={selectedEvents:[],location:{},dates:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedEvents,n=t.dates,l=t.location;return r.a.createElement(N.a,null,r.a.createElement(ie.a,{exact:!0,path:"/",render:function(){return r.a.createElement(le,{startPlan:e.startPlan})}}),r.a.createElement(ie.a,{path:"/plan",render:function(){return r.a.createElement(E.a,{columns:2,divided:!0,style:{height:"100vh"}},r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,null,r.a.createElement(D,{dates:n,selected:a,deleteSelectedEvent:e.deleteSelectedEvent})),r.a.createElement(E.a.Column,null,r.a.createElement(L,{dates:n,location:l,addBusiness:e.addBusinessToPlanner}))))}}))}}]),t}(r.a.Component);a(571);var ce=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(oe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[374,1,2]]]);
//# sourceMappingURL=main.6da65c33.chunk.js.map