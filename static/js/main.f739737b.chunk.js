(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{370:function(e,t,a){e.exports=a(568)},375:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(81),i=a.n(r),s=(a(375),a(365)),o=a(19),c=a(18),u=a(23),d=a(22),h=a(9),m=a(24),p=a(326),E=a(197),v=a(37),g=a(72),b=a(299),f=a(147),j=a(325),y=a(108),O=a(322),k=a(323),w=a(324),C=a(266),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={viewport:{width:400,height:400,latitude:a.props.latitude,longitude:a.props.longitude,zoom:16}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(C.b,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoiYWxleGN1aSIsImEiOiJjanYzNTVsejcyY29uNDNwZml4YjZ3dHV4In0.f4di1n6PqkuH-Lksizp3-Q"}),l.a.createElement(C.a,{latitude:this.props.latitude,longitude:this.props.longitude},l.a.createElement(v.a,{color:"red",name:"point"})))}}]),t}(n.Component),x=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getPhotos",value:function(){return this.props.details.photos.map(function(e){return l.a.createElement("div",null,l.a.createElement(b.a,{trigger:l.a.createElement(y.a,{src:e,size:"medium",verticalAlign:"middle"}),basic:!0},l.a.createElement(b.a.Content,{image:!0},l.a.createElement(y.a,{wrapped:!0,size:"big",src:e}))),l.a.createElement(O.a,{hidden:!0,fitted:!0}))})}},{key:"getAddress",value:function(){for(var e=this.props.details.location.display_address,t=[],a=0;a<e.length-1;a++)t.push(e[a]),t.push(", ");return t.push(e[e.length-1]),t}},{key:"getCategories",value:function(){for(var e=this.props.details.categories,t=[],a=0;a<e.length-1;a++){var n=e[a].title;t.push(n),t.push(", ")}return t.push(e[e.length-1].title),t}},{key:"render",value:function(){if(this.props.loading)return l.a.createElement(v.a,{loading:!0,name:"circle notched"});var e=this.getCategories(),t=this.getPhotos(),a=this.getAddress();return l.a.createElement(E.a,{columns:3,divided:!0},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Column,null,l.a.createElement(k.a,{as:"h1"},l.a.createElement(v.a,{name:"photo"}),l.a.createElement(k.a.Content,null,"Photos")),t),l.a.createElement(E.a.Column,{width:8},l.a.createElement(k.a,{as:"h1"},l.a.createElement(k.a.Content,null,this.props.details.name),l.a.createElement(k.a.Subheader,null,e)),l.a.createElement(w.a,{bulleted:!0},l.a.createElement(w.a.Item,null,l.a.createElement(w.a.Header,null,"Address"),a),l.a.createElement(w.a.Item,null,l.a.createElement(w.a.Header,null,"Phone"),this.props.details.display_phone),l.a.createElement(w.a.Item,null,l.a.createElement(w.a.Header,null,"Price"),this.props.price),l.a.createElement(w.a.Item,null,l.a.createElement(w.a.Header,null,"Rating"),this.props.rating)),l.a.createElement(S,{latitude:this.props.details.coordinates.latitude,longitude:this.props.details.coordinates.longitude}))))}}]),t}(l.a.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).searchHandler=a.searchHandler.bind(Object(h.a)(a)),a.state={details:[],loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"yelp_detailed_url",value:function(e){return"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/"+e}},{key:"searchHandler",value:function(e){var t=this,a=this.props.eventID;this.setState({loading:!0}),fetch(this.yelp_detailed_url(a),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer 1oVKZrEwzseUCh8sk57ORW4vBLSPDpk7tMDgrLSzsBVQ554QHwHKoghKGRNLhiVTajkH3zD8vuxepiWhu9GMCwglYwZqUiYlGrR9__0DMsVxEuTyL1iITpqI8qHGXHYx"}}).then(function(e){return e.json()}).then(function(e){t.setState({details:e},function(){t.setState({loading:!1})})})}},{key:"convertRating",value:function(){var e=[],t=this.props.eventRating,a=!1;for(Number.isInteger(t)||(t-=.5,a=!0);t>0;)e.push(l.a.createElement(v.a,{name:"star",color:"yellow"})),t-=1;return a&&e.push(l.a.createElement(v.a,{name:"star half",color:"yellow"})),e}},{key:"render",value:function(){var e=this.convertRating();return l.a.createElement(b.a,{trigger:l.a.createElement(f.a.Group,{horizontal:!0,onClick:this.searchHandler},l.a.createElement(f.a,null,this.props.eventName),l.a.createElement(f.a,{style:{color:"green"}},this.props.eventPrice),l.a.createElement(f.a,null,e))},l.a.createElement(b.a.Header,null,this.props.eventsDate),l.a.createElement(b.a.Content,null,l.a.createElement(x,{loading:this.state.loading,details:this.state.details,price:l.a.createElement(j.a,{style:{color:"green"}},this.props.eventPrice),rating:e})))}}]),t}(l.a.Component),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e,t){var n=t.index,l=a.state.activeIndex===n?-1:n;a.setState({activeIndex:l})},a.state={activeIndex:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.events.map(function(t){return l.a.createElement("ul",null,l.a.createElement(P,{eventsDate:e.props.eventsDate,eventName:t.business.name,eventPhone:t.business.phone,eventPrice:t.business.price,eventRating:t.business.rating,eventID:t.business.id}))}),a=this.state.activeIndex;return l.a.createElement(p.a,{fluid:!0,styled:!0},l.a.createElement(p.a.Title,{active:0===a,index:0,onClick:this.handleClick},l.a.createElement(E.a,null,l.a.createElement(E.a.Row,null,l.a.createElement(v.a,{name:"dropdown"}),this.props.eventsDate,l.a.createElement(E.a.Column,{floated:"left"}),l.a.createElement(E.a.Column,{floated:"right"},l.a.createElement(g.a,{circular:!0,color:"blue"},t.length))))),l.a.createElement(p.a.Content,{active:0===a},l.a.createElement("p",null,t)))}}]),t}(l.a.Component),H=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"groupEvents",value:function(){for(var e=this.props.selected.sort(function(e,t){return e.date.getTime()-t.date.getTime()}),t={},a=0;a<e.length;a++){t[e[a].date.toDateString()]=[]}for(var n=0;n<e.length;n++){var l=e[n];t[l.date.toDateString()].push(l)}return t}},{key:"render",value:function(){for(var e=Object.values(this.groupEvents()),t=[],a=0;a<e.length;a++){var n=e[a];t.push(l.a.createElement(D,{events:n,eventsDate:Object.keys(this.groupEvents())[a]}))}return l.a.createElement("div",null,l.a.createElement(k.a,{as:"h1"},l.a.createElement(v.a,{name:"calendar alternate outline"}),l.a.createElement(k.a.Content,null,"Calendar",l.a.createElement(k.a.Subheader,null,"Plan your trip"))),l.a.createElement("br",null),t)}}]),t}(l.a.Component),I=a(260),R=a(84),T=a(107),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSelect=a.handleSelect.bind(Object(h.a)(a)),a.state={dateIndex:-1,disable:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSelect",value:function(e){this.props.addBusiness(this.props.business,this.props.dates[this.state.dateIndex])}},{key:"render",value:function(){var e=this,t=this.props.business,a=this.props.dates.map(function(e){return e.toLocaleDateString()});return l.a.createElement(f.a,{raised:!0,style:{marginRight:"10px"}},l.a.createElement(E.a,{celled:!0},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Column,{width:6},l.a.createElement(y.a,{src:t.image_url,style:{objectFit:"cover",width:"100%",height:"200px"}})),l.a.createElement(E.a.Column,{width:10},l.a.createElement("h3",null,t.name),l.a.createElement("div",{style:{float:"left",width:"50%"}},l.a.createElement("b",null,t.price),l.a.createElement("br",null),l.a.createElement("span",null,t.categories.map(function(e){return e.title}).join(", "))," ",l.a.createElement("br",null),l.a.createElement("div",{style:{position:"absolute",bottom:"0",width:"50%"}},t.display_phone," ",l.a.createElement("br",null),t.location.display_address,l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement("div",{style:{float:"right"}},l.a.createElement("b",null,t.rating,"/5 "),l.a.createElement("br",null),t.review_count," reviews ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(R.a,{placeholder:"Select Date",fluid:!0,selection:!0,options:a.map(function(e,a){return{key:t.id+e,text:e,value:a}}),style:{marginBottom:"5px"},onChange:function(t,a){e.setState({dateIndex:a.value,disable:!1})}}),l.a.createElement(T.a,{primary:!0,disabled:this.state.disable,onClick:this.handleSelect},l.a.createElement(T.a.Content,null,l.a.createElement(v.a,{name:"add"})))),l.a.createElement("br",null),l.a.createElement("br",null)))))}}]),t}(l.a.Component),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).searchHandler=a.searchHandler.bind(Object(h.a)(a)),a.state={query:"",results:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"yelp_url",value:function(e){return"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term="+e+"&latitude="+this.props.location.lat.toString()+"&longitude="+this.props.location.lon.toString()}},{key:"searchHandler",value:function(e){var t=this;fetch(this.yelp_url(this.state.query),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer 1oVKZrEwzseUCh8sk57ORW4vBLSPDpk7tMDgrLSzsBVQ554QHwHKoghKGRNLhiVTajkH3zD8vuxepiWhu9GMCwglYwZqUiYlGrR9__0DMsVxEuTyL1iITpqI8qHGXHYx"}}).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({results:e.businesses})})}},{key:"render",value:function(){var e=this,t=(window.innerHeight-68).toString()+"px";return l.a.createElement(j.a,null,l.a.createElement("div",{style:{paddingTop:"10px",paddingBottom:"10px"}},l.a.createElement(I.a,{action:{color:"teal",labelPosition:"right",icon:"search",content:"Search",onClick:this.searchHandler},placeholder:"Search",onChange:function(t){e.setState({query:t.target.value})}})),l.a.createElement(j.a,{style:{overflow:"auto",maxHeight:t,paddingTop:"10px",paddingBottom:"10px"}},l.a.createElement(j.a,null,this.state.results.map(function(t,a){return l.a.createElement(B,{key:a.toString(),business:t,dates:e.props.dates,addBusiness:e.props.addBusiness})}))))}}]),t}(l.a.Component),_=a(10),A=a(329),G=a(353),N=a(362),V=a(215);var Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){var n,l=t.name,r=t.value;a.state.hasOwnProperty(l)&&a.setState((n={},Object(_.a)(n,l,r),Object(_.a)(n,"dateCheck",r.split(" - ").length<2||0===r.split(" - ")[1].length),n))},a.state={datesRange:"",location:null,dateCheck:!0,placeCheck:!0},a.handleStartPlan=a.handleStartPlan.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleStartPlan",value:function(e){var t=this.state.datesRange.split(" - ");function a(e){var t=e.split("-"),a=t[0];return t[0]=t[1],t[1]=a,t.join("-")}var n=function(e,t){for(var a=[],n=e,l=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};n<=t;)a.push(n),n=l.call(n,1);return a}(new Date(a(t[0])),new Date(a(t[1])));this.props.startPlan(this.state.location,n)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"login-form"},l.a.createElement("style",null,'\n        .login-form{\n          height:100vh;\n        }\n        body {\n          background-image: url("https://lonelyplanetimages.imgix.net/mastheads/GettyImages-538096543_medium.jpg");\n          background-size: cover;\n          /* Resize the background image to cover the entire container */\n        }\n    '),l.a.createElement(E.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},l.a.createElement(E.a.Column,{style:{maxWidth:450}},l.a.createElement(f.a,null,l.a.createElement(k.a,null,"Plan Your Next Adventure."),l.a.createElement(A.a,{size:"large"},l.a.createElement(G.DatesRangeInput,{name:"datesRange",placeholder:"From - To",value:this.state.datesRange,iconPosition:"left",onChange:this.handleChange}),l.a.createElement(N.a,{onSuggestSelect:function(t){t&&e.setState({placeCheck:!1,location:{lat:t.location.lat,lon:t.location.lng}})}}),l.a.createElement("br",null),l.a.createElement(V.b,{to:"/plan"},l.a.createElement(T.a,{onClick:this.handleStartPlan,disabled:this.state.dateCheck||this.state.placeCheck,color:"teal",fluid:!0,size:"large"},"Start Planning!")))))))}}]),t}(l.a.Component),q=a(109),L=(new Date("2019-12-16"),new Date("2019-12-17"),new Date("2019-12-18"),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).addBusinessToPlanner=a.addBusinessToPlanner.bind(Object(h.a)(a)),a.startPlan=a.startPlan.bind(Object(h.a)(a)),a.state={selectedEvents:[],location:{},dates:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"addBusinessToPlanner",value:function(e,t){var a=this;this.setState({selectedEvents:[].concat(Object(s.a)(this.state.selectedEvents),[{business:e,date:t}])},function(){console.log(a.state.selectedEvents)})}},{key:"startPlan",value:function(e,t){console.log(e,t),this.setState({location:e,dates:t})}},{key:"render",value:function(){var e=this;return l.a.createElement(V.a,null,l.a.createElement(q.a,{exact:!0,path:"/",render:function(){return l.a.createElement(Y,{startPlan:e.startPlan})}}),l.a.createElement(q.a,{path:"/plan",render:function(){return l.a.createElement(E.a,{columns:2,divided:!0},l.a.createElement(E.a.Row,null,l.a.createElement(E.a.Column,null,l.a.createElement(H,{selected:e.state.selectedEvents})),l.a.createElement(E.a.Column,null,l.a.createElement(z,{dates:e.state.dates,location:e.state.location,addBusiness:e.addBusinessToPlanner}))))}}))}}]),t}(l.a.Component));a(567);var W=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[370,1,2]]]);
//# sourceMappingURL=main.f739737b.chunk.js.map